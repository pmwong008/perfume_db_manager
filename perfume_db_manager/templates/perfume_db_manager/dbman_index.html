{% extends 'perfume_db_manager/dbman_base.html' %}
{% block content %}
<div class="container mt-4">
<h1>Perfume Database Manager</h1>
<button><a href="{% url 'dbman_create' %}">Add New Perfume</a></button>
<hr>
<form method="get">
  <label for="brand">Filter by Brand:</label>
  <select name="brand" onchange="this.form.submit()">
    <option value="all" {% if selected_brand == 'all' %}selected{% endif %}>Show All</option>
    {% for brand in brands %}
      <option value="{{ brand }}" {% if brand == selected_brand %}selected{% endif %}>{{ brand }}</option>
    {% endfor %}
  </select>
</form>
<hr>

<form method="get" style="display: inline;">
  <input type="hidden" name="brand" value="{{ selected_brand }}">
  <input type="hidden" name="sort" value="{% if sort_order == 'asc' %}desc{% else %}asc{% endif %}">
  <button type="submit">
    Sort by ID {% if sort_order == 'asc' %}↓{% else %}↑{% endif %}
  </button>
</form>
<p>Currently sorted by ID: <strong>{{ sort_order|title }}</strong></p>


<hr>

<ul>
  {% for perfume in results %}
    <li>
      <strong>{{ perfume.name }}</strong> by {{ perfume.brand }} ({{ perfume.launch_year }})
      <a href="{% url 'dbman_update' perfume.pk %}">Edit</a>
      <a href="{% url 'dbman_delete' perfume.pk %}">Delete</a>
    </li>
  {% empty %}
    <li>No perfumes found.</li>
  {% endfor %}
</ul>
</div>
{% endblock %}
